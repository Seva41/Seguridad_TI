# +---------------------------------------------------------------------------+
# |                       Not a Malware                                       |
# |                               by Seva                                     |
# |                    October 2023                                           |
# |                          Python 3.12.0                                    |
# +---------------------------------------------------------------------------+

import os
import sys

# Verificar el sistema operativo actual
is_windows = sys.platform == "win32"

##  Ctypes Styles:
##  0 : OK
##  1 : OK | Cancel
##  2 : Abort | Retry | Ignore
##  3 : Yes | No | Cancel
##  4 : Yes | No
##  5 : Retry | Cancel
##  6 : Cancel | Try Again | Continue


def Mbox(title, text, style):
    if is_windows:
        import ctypes
        return ctypes.windll.user32.MessageBoxW(0, text, title, style)
    else:
        import tkinter as tk
        from tkinter import messagebox
        root = tk.Tk()
        root.withdraw()
        return messagebox.showinfo(title, text)


def create_text_file(filename, content):
    try:
        with open(filename, "w") as file:
            file.write(content)
        print(f"Archivo '{filename}' creado con exito.")
    except Exception as e:
        print(f"Error al crear el archivo: {str(e)}")


def bin_to_text(bin_string):
    text = "".join(
        [chr(int(bin_string[i : i + 8], 2)) for i in range(0, len(bin_string), 8)]
    )
    return text


Debug = True
if Debug:
    source_code = """
# +---------------------------------------------------------------------------+
# |                       Not a Malware                                       |
# |                               by Seva                                     |
# |                    October 2023                                           |
# |                          Python 3.12.0                                    |
# +---------------------------------------------------------------------------+

import ctypes
import os

##  Ctypes Styles:
##  0 : OK
##  1 : OK | Cancel
##  2 : Abort | Retry | Ignore
##  3 : Yes | No | Cancel
##  4 : Yes | No
##  5 : Retry | Cancel
##  6 : Cancel | Try Again | Continue

def Mbox(title, text, style):
    if is_windows:
        import ctypes
        return ctypes.windll.user32.MessageBoxW(0, text, title, style)
    else:
        import tkinter as tk
        from tkinter import messagebox
        root = tk.Tk()
        root.withdraw()
        return messagebox.showinfo(title, text)

def create_text_file(filename, content):
    try:
        with open(filename, "w") as file:
            file.write(content)
        print(f"Archivo '{filename}' creado con éxito.")
    except Exception as e:
        print(f"Error al crear el archivo: {str(e)}")

def bin_to_text(bin_string):
    text = "".join(
        [chr(int(bin_string[i : i + 8], 2)) for i in range(0, len(bin_string), 8)]
    )
    return text

Debug = True
if Debug:
    source_code = ""
    with open("source_malware.py", "w") as code_file:
        code_file.write(source_code)
    Mbox("Woops!", "Error al instalar malware... ¿o no?", 0)

else:
    file_content = "01101000 01101111 01101100 01100001 00100000 01101101 01110101 01101110 01100100 01101111"
    file_content = bin_to_text(file_content.replace(" ", ""))
    file_name = "key.txt"
    current_directory = os.path.dirname(os.path.abspath(__file__))
    file_path = os.path.join(current_directory, file_name)
    with open(file_path, "w") as file:
        file.write(file_content)
    Mbox("Debug", "La llave se ha creado con éxito", 0)
    """
    with open("source_malware.py", "w") as code_file:
        code_file.write(source_code)
    Mbox("Woops!", "Error al instalar malware... o no?", 0)

else:
    file_content = "01101000 01101111 01101100 01100001 00100000 01101101 01110101 01101110 01100100 01101111"
    file_content = bin_to_text(file_content.replace(" ", ""))
    file_name = "key.txt"
    current_directory = os.path.dirname(os.path.abspath(__file__))
    file_path = os.path.join(current_directory, file_name)
    with open(file_path, "w") as file:
        file.write(file_content)
    Mbox("Debug", "La llave se ha creado con exito", 0)
